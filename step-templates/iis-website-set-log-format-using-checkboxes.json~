{
  "Id": "ActionTemplates-262",
  "Name": "IIS - Set log format using checkboxes",
  "Description": "Sets fields included in IIS logging. Uses named checkboxes where the names are identical to the naming scheme in IIS Manager.",
  "ActionType": "Octopus.Script",
  "Version": 10,
  "Properties": {
    "Octopus.Action.Script.Syntax": "PowerShell",
    "Octopus.Action.Script.ScriptSource": "Inline",
    "Octopus.Action.Script.ScriptBody": "$IisLogFields = \"\"\nif ($#{Date}) { $IisLogFields = $IisLogFields + \",Date\" }\nif ($#{Time}) { $IisLogFields = $IisLogFields + \",Time\" }\nif ($#{ClientIP}) { $IisLogFields = $IisLogFields + \",ClientIP\" }\nif ($#{UserName}) { $IisLogFields = $IisLogFields + \",UserName\" }\nif ($#{SiteName}) { $IisLogFields = $IisLogFields + \",SiteName\" }\nif ($#{ComputerName}) { $IisLogFields = $IisLogFields + \",ComputerName\" }\nif ($#{ServerIP}) { $IisLogFields = $IisLogFields + \",ServerIP\" }\nif ($#{Method}) { $IisLogFields = $IisLogFields + \",Method\" }\nif ($#{UriStem}) { $IisLogFields = $IisLogFields + \",UriStem\" }\nif ($#{UriQuery}) { $IisLogFields = $IisLogFields + \",UriQuery\" }\nif ($#{HttpStatus}) { $IisLogFields = $IisLogFields + \",HttpStatus\" }\nif ($#{Win32Status}) { $IisLogFields = $IisLogFields + \",Win32Status\" }\nif ($#{BytesSent}) { $IisLogFields = $IisLogFields + \",BytesSent\" }\nif ($#{TimeTaken}) { $IisLogFields = $IisLogFields + \",TimeTaken\" }\nif ($#{ServerPort}) { $IisLogFields = $IisLogFields + \",ServerPort\" }\nif ($#{UserAgent}) { $IisLogFields = $IisLogFields + \",UserAgent\" }\nif ($#{Cookie}) { $IisLogFields = $IisLogFields + \",Cookie\" }\nif ($#{Referer}) { $IisLogFields = $IisLogFields + \",Referer\" }\nif ($#{ProtocolVersion}) { $IisLogFields = $IisLogFields + \",ProtocolVersion\" }\nif ($#{Host}) { $IisLogFields = $IisLogFields + \",Host\" }\nif ($#{HttpSubStatus}) { $IisLogFields = $IisLogFields + \",HttpSubStatus\" }\n\nif ($IisLogFields[0] -eq \",\") { $IisLogFields = $IisLogFields.Substring(1) }\n\nimport-module webadministration\n$site = get-itemproperty IIS:\\sites\\#{SiteName}\n$site.logFile.logExtFileFlags = \"$IisLogFields\"\n$site |set-item",
    "Octopus.Action.Script.ScriptFileName": null,
    "Octopus.Action.Package.NuGetFeedId": null,
    "Octopus.Action.Package.NuGetPackageId": null
  },
  "Parameters": [
    {
      "Name": "SiteName",
      "Label": "SiteName",
      "HelpText": null,
      "DefaultValue": null,
      "DisplaySettings": {
        "Octopus.ControlType": "SingleLineText"
      }
    },
    {
      "Name": "Date",
      "Label": "Date (date)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "Time",
      "Label": "Time (time)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "ClientIP",
      "Label": "ClientIP IP Address (c-ip)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "UserName",
      "Label": "User Name (cs-username)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "ServiceName",
      "Label": "Service Name (s-sitename)",
      "HelpText": "",
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "ComputerName",
      "Label": "ServerName (s-computername)",
      "HelpText": null,
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "ServerIP",
      "Label": "Server IP Address (s-ip)",
      "HelpText": "",
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "Method",
      "Label": "Method (cs-method)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "UriStem",
      "Label": "UriStem (cs-uri-stem)",
      "HelpText": null,
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "UriQuery",
      "Label": "Uri query (cs-uri-query)",
      "HelpText": null,
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "HttpStatus",
      "Label": "Protocol Status (sc-status)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "Win32Status",
      "Label": "Win32 Status (sc-win32-status)",
      "HelpText": null,
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "HttpSubStatus",
      "Label": "Protocol Substatus (sc-substatus)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "BytesSent",
      "Label": "Bytes sent (sc-bytes)",
      "HelpText": "",
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "BytesRecv",
      "Label": "Bytes received (cs-bytes)",
      "HelpText": null,
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "TimeTaken",
      "Label": "Time taken (time-taken)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "ProtocolVersion",
      "Label": "Protocol version (cs-version)",
      "HelpText": null,
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "Host",
      "Label": "Host (cs-host)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "UserAgent",
      "Label": "User agent (cs(UserAgent))",
      "HelpText": null,
      "DefaultValue": "true",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "Cookie",
      "Label": "Cookie (cs(Cookie))",
      "HelpText": "",
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "Referer",
      "Label": "Referer (cs(Referer))",
      "HelpText": null,
      "DefaultValue": "False",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    },
    {
      "Name": "ServerPort",
      "Label": "Server Port (s-port)",
      "HelpText": "",
      "DefaultValue": "True",
      "DisplaySettings": {
        "Octopus.ControlType": "Checkbox"
      }
    }
  ],
	 "LastModifiedBy": "faester",
  "$Meta": {
    "ExportedAt": "2016-06-15T09:15:08.088Z",
    "OctopusVersion": "3.3.17",
    "Type": "ActionTemplate"
  }
}
